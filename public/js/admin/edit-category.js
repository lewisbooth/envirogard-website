"use strict";var form=document.forms.category,imageInput=form.querySelector('[name="coverImage"]'),imagePreviewContainer=form.querySelector(".image-preview"),imagePreview=imagePreviewContainer.querySelector(".image-preview img"),copyFromTitleLink=form.querySelector("#copy-from-title"),copyFromDescriptionLink=form.querySelector("#copy-from-description"),uploadProgress=document.querySelector(".admin__upload-progress"),uploadProgressBar=uploadProgress.querySelector("progress"),deleteConfirmation=document.querySelector("#delete-item__lightbox"),inputs={title:form.querySelector('input[name="title"]'),shortDescription:form.querySelector('textarea[name="shortDescription"]'),longDescription:form.querySelector('textarea[name="longDescription"]'),metaTitle:form.querySelector('input[name="metaTitle"]'),metaDescription:form.querySelector('textarea[name="metaDescription"]')},deleteImage=form.querySelector('input[name="deleteImage"]');function previewImage(e){var t=e.target;if(t.files&&t.files[0]){var r=new FileReader;r.onload=function(e){imagePreview.setAttribute("src",e.target.result),imagePreviewContainer.removeAttribute("hidden")},r.readAsDataURL(t.files[0])}else imagePreview.setAttribute("src",""),imagePreviewContainer.setAttribute("hidden",!0)}function copyFromTitle(){inputs.title.value&&(inputs.metaTitle.value=inputs.title.value+" for Hire")}function copyFromDescription(){inputs.shortDescription.value&&(inputs.metaDescription.value=inputs.shortDescription.value)}function submitForm(e){e.preventDefault(),errors.clear();var t=new FormData;for(var r in inputs)inputs[r]&&t.append(r,inputs[r].value);deleteImage&&t.append("deleteImage",deleteImage.checked),imageInput.files&&imageInput.files[0]&&(t.append("coverImage",imageInput.files[0]),uploadProgress.classList.add("active"));axios.post(window.location.pathname,t,{onUploadProgress:function(e){return uploadProgressBar.value=e.loaded/e.total}}).then(function(){return window.location="/dashboard/categories"}).catch(function(e){var t=e.response.data||{title:"Error uploading category",text:"Please try again. If the problem persists, please contact AMP."};errors.flash(t.title,t.text)})}function toggleDeleteConfirmation(){deleteConfirmation.classList.toggle("active")}imageInput.addEventListener("change",previewImage),copyFromTitleLink.addEventListener("click",copyFromTitle),copyFromDescriptionLink.addEventListener("click",copyFromDescription);